<!DOCTYPE html>
<html class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-posta Doğrulama - Kuzamo</title>
    <meta name="description" content="Kuzamo erken erişim için e-posta adresinizi doğrulayın. Küçük ekipler için AI destekli içerik planlama ve yayınlama iş akışı." />
    <link rel="canonical" href="https://kuzamo.com/confirm-email.html" />
    <meta name="robots" content="index,follow" />
    <meta property="og:title" content="Kuzamo — AI Destekli İçerik Planlama" />
    <meta property="og:description" content="Küçük ekipler için içerik planlama ve yayınlamayı tek yerden yönetin." />
    <meta property="og:url" content="https://kuzamo.com/confirm-email.html" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/og-image.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Kuzamo — AI Destekli İçerik Planlama" />
    <meta name="twitter:description" content="Blog, sosyal medya ve e-postalarınızı tek yerden yönetin." />
    <meta name="twitter:image" content="/og-image.png" />
    <link rel="icon" href="favicon.ico" />
    <!-- Resource hints for better performance -->
    <link rel="dns-prefetch" href="//challenges.cloudflare.com" />
    <link rel="preconnect" href="//challenges.cloudflare.com" crossorigin />
    <script>
      (function(){
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>
    <!-- Tailwind CSS CDN - For production, consider using Tailwind CLI or PostCSS plugin -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Cookie Consent -->
    <script src="cookie-consent.js"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              brand: {
                50: '#eef2ff', 100: '#e0e7ff', 200: '#c7d2fe', 300: '#a5b4fc',
                400: '#818cf8', 500: '#6366f1', 600: '#4f46e5', 700: '#4338ca',
                800: '#3730a3', 900: '#312e81'
              }
            },
            boxShadow: { 'soft': '0 10px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1)'},
            backgroundSize: { '400%': '400% 400%' },
            keyframes: {
              'fade-in-up': {
                '0%': { opacity: '0', transform: 'translateY(16px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' }
              },
              float: {
                '0%,100%': { transform: 'translateY(0)' },
                '50%': { transform: 'translateY(-8px)' }
              },
              shine: {
                '0%': { backgroundPosition: '0% 50%' },
                '100%': { backgroundPosition: '100% 50%' }
              }
            },
            animation: {
              'fade-in-up': 'fade-in-up 0.6s ease-out both',
              'float': 'float 6s ease-in-out infinite',
              'shine': 'shine 8s linear infinite'
            }
          }
        }
      }
    </script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body class="h-full bg-gray-50 text-gray-800 dark:bg-gray-950 dark:text-gray-100 relative overflow-x-clip">
  <!-- Decorative background blobs -->
  <div aria-hidden="true" class="pointer-events-none absolute -top-24 -left-24 h-72 w-72 rounded-full bg-brand-400/20 blur-3xl animate-float"></div>
  <div aria-hidden="true" class="pointer-events-none absolute top-32 -right-16 h-80 w-80 rounded-full bg-cyan-300/20 dark:bg-cyan-400/10 blur-3xl animate-float"></div>
  
  <!-- Navbar -->
  <header class="bg-white/70 dark:bg-gray-900/70 backdrop-blur-md fixed top-0 left-0 w-full z-10 shadow-md">
      <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <a href="/index.html" class="flex items-center gap-2">
            <span class="inline-flex h-9 w-9 items-center justify-center rounded-lg bg-brand-600 text-white font-bold">K</span>
            <span class="text-2xl font-bold text-brand-600">Kuzamo</span>
          </a>
        </div>
        <nav class="hidden md:flex items-center gap-6 text-sm">
          <a href="/about.html" class="hover:text-brand-600">Hakkımızda</a>
          <a href="/pricing.html" class="hover:text-brand-600">Fiyatlar</a>
          <a href="/faq.html" class="hover:text-brand-600">SSS</a>
          <a href="/contact.html" class="hover:text-brand-600">İletişim</a>
        </nav>
        <div class="flex items-center gap-3">
          <button id="themeToggle" aria-label="Tema değiştir" class="rounded-lg border border-gray-200 dark:border-gray-800 px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-900">🌙/☀️</button>
          <button id="langToggle" class="rounded-lg border border-gray-200 dark:border-gray-800 px-3 py-2 text-sm">TR/EN</button>
          <button id="mobileMenuBtn" class="md:hidden inline-flex items-center justify-center rounded-lg border border-gray-200 dark:border-gray-800 px-3 py-2 text-sm">Menü</button>
        </div>
      </div>
      <div id="mobileMenu" class="md:hidden hidden border-t border-gray-200 dark:border-gray-800">
        <nav class="px-6 py-3 flex flex-col gap-3 text-sm bg-white dark:bg-gray-900">
          <a href="/about.html" class="hover:text-brand-600">Hakkımızda</a>
          <a href="/pricing.html" class="hover:text-brand-600">Fiyatlar</a>
          <a href="/faq.html" class="hover:text-brand-600">SSS</a>
          <a href="/contact.html" class="hover:text-brand-600">İletişim</a>
        </nav>
      </div>
    </header>

    <script src="main.js" defer></script>

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto px-6 py-20 mt-16">
    <div class="text-center">
      <div class="mb-8">
        <div class="inline-flex h-20 w-20 items-center justify-center rounded-full bg-brand-100 dark:bg-brand-900 mb-4">
          <svg class="h-10 w-10 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
          </svg>
        </div>
        <h1 class="text-4xl font-bold mb-4" data-lang="confirm_title">E-posta Adresinizi Doğrulayın</h1>
        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto" data-lang="confirm_description">
          Erken erişim için e-posta adresinizi doğruluyoruz. Lütfen bekleyin.
        </p>
      </div>

      <!-- Loading State -->
      <div id="loadingState" class="bg-white dark:bg-gray-900 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700 mb-8">
        <div class="flex items-center justify-center mb-4">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600"></div>
        </div>
        <p class="text-gray-600 dark:text-gray-300" data-lang="confirm_loading">E-posta adresiniz doğrulanıyor...</p>
      </div>

      <!-- Success State -->
      <div id="successState" class="hidden bg-white dark:bg-gray-900 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700 mb-8">
        <div class="flex items-center justify-center mb-4">
          <div class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900">
            <svg class="h-6 w-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>
        </div>
        <h2 class="text-2xl font-semibold mb-2" data-lang="confirm_success_title">E-posta Başarıyla Doğrulandı!</h2>
        <p class="text-gray-600 dark:text-gray-300 mb-6" data-lang="confirm_success_message">
          Kuzamo'ya hoş geldiniz! E-posta adresiniz doğrulandı ve erken erişim listesine eklendiniz. Ürün hazır olduğunda size haber vereceğiz.
        </p>
        <div class="flex justify-center">
          <a href="/index.html" class="inline-flex items-center justify-center px-6 py-3 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors" data-lang="confirm_back_home">
            Ana Sayfaya Dön
            <svg class="ml-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </a>
        </div>
      </div>

      <!-- Error State -->
      <div id="errorState" class="hidden bg-white dark:bg-gray-900 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700 mb-8">
        <div class="flex items-center justify-center mb-4">
          <div class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900">
            <svg class="h-6 w-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </div>
        </div>
        <h2 class="text-2xl font-semibold mb-2" data-lang="confirm_error_title">Doğrulama Başarısız</h2>
        <p class="text-gray-600 dark:text-gray-300 mb-6" id="errorMessage" data-lang="confirm_error_message">
          E-posta adresinizi doğrulayamadık. Bu durum süresi dolmuş veya geçersiz bir doğrulama bağlantısından kaynaklanabilir.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="/contact.html" class="inline-flex items-center justify-center px-6 py-3 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors" data-lang="confirm_support">
            Destek İletişimi
          </a>
          <a href="/index.html" class="inline-flex items-center justify-center px-6 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700" data-lang="confirm_back_home">
            Ana Sayfaya Dön
          </a>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-100 dark:bg-gray-900 py-10 text-gray-600 dark:text-gray-300">
      <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-3 gap-8 items-start">
        <div>
          <div class="flex items-center gap-2">
            <span class="inline-flex h-9 w-9 items-center justify-center rounded-lg bg-brand-600 text-white font-bold">K</span>
            <span class="text-xl font-bold text-brand-600">Kuzamo</span>
          </div>
          <p class="mt-3 text-sm footer-description" data-lang="footer_description"></p>
        </div>
        <div class="text-sm space-y-2">
          <a href="/about.html" class="block hover:text-brand-600 footer-about" data-lang="footer_about"></a>
          <a href="/pricing.html" class="block hover:text-brand-600 footer-pricing" data-lang="footer_pricing"></a>
          <a href="/faq.html" class="block hover:text-brand-600 footer-faq" data-lang="footer_faq"></a>
          <a href="/contact.html" class="block hover:text-brand-600 footer-contact" data-lang="footer_contact"></a>
        </div>
        <div class="text-sm space-y-2">
          <a href="/privacy.html" class="block hover:text-brand-600 footer-privacy" data-lang="footer_privacy"></a>
          <a href="/cookie-policy.html" class="block hover:text-brand-600 footer-cookie-policy" data-lang="footer_cookie_policy"></a>
          <a href="/terms.html" class="block hover:text-brand-600 footer-terms" data-lang="footer_terms"></a>
          <a href="mailto:hello@kuzamo.com" class="block hover:text-brand-600">hello@kuzamo.com</a>
        </div>
      </div>
      <div class="mt-8 text-center text-xs footer-copyright" data-lang="footer_copyright"></div>
    </footer>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
        processEmailConfirmation();
      });

      async function processEmailConfirmation() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('ok') === '1') { showSuccess(''); return; }
        if (urlParams.get('error') === '1') { showError('E-posta doğrulanamadı. Lütfen tekrar deneyin.'); return; }

        const token = urlParams.get('token');
        if (!token) { showError('Doğrulama tokeni bulunamadı'); return; }

        try {
          const response = await fetch(`/api/confirm-email?token=${encodeURIComponent(token)}`, {
            headers: { 'Accept': 'application/json' }
          });
          if (response.ok) {
            const data = await safeJson(response);
            showSuccess(data?.message || '');
          } else {
            const err = await safeJson(response);
            showError(err?.error || 'E-posta doğrulanamadı. Lütfen tekrar deneyin.');
          }
        } catch (error) {
          console.error('Error confirming email:', error);
          showError('E-posta doğrulanamadı. Lütfen tekrar deneyin.');
        }
      }

      function showSuccess(message) {
        document.getElementById('loadingState').classList.add('hidden');
        document.getElementById('successState').classList.remove('hidden');
        document.getElementById('errorState').classList.add('hidden');
      }

      function showError(message) {
        document.getElementById('loadingState').classList.add('hidden');
        document.getElementById('successState').classList.add('hidden');
        document.getElementById('errorState').classList.remove('hidden');
        document.getElementById('errorMessage').textContent = message;
      }

      async function safeJson(res){ try { return await res.json(); } catch { return null; } }
    </script>
  </body>
  </html>
